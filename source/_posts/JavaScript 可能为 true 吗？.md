---

title: JavaScript 可能为 true 吗？
date: 2018/1/19 23:25:20 
tags: javscript valueOf 对象

---

> 　　今天看到一篇文章，觉得挺有意思，就好奇地点开看了下。这篇文章提到了一个面试题：在javascript中(a==1&&a==2&a==3)可能为true吗？起初看到这个题目的时候觉得很懵逼，在同一个条件分支里a可能同时等于1、2和3吗？毫无头绪，但既然有人出了这道题目，肯定是事出有妖了，所以苦思冥想了两三个小时，还是感觉没什么头绪，唯一可以肯定的是应该与底层的东西有关，后来带着好奇的心理接着往下看了，不看不知道，一看才知道，原来与javascript底层的类型转换有关，javascript高程三里有过相关细致的讲解，在两个数据类型不同的值比较时会先让其中一个值调用valueOf方法转换后进行比较，如果类型还是不同的话会继续调用toString方法转换比较。当时看高程的时候其实对这个底层概念印象比较深的，但可能由于真正用到的地方不多，导致遗忘了，现在看到这道题的解法才恍然大悟，相信以后对这个概念记忆深刻， 今天把这个概念和这道题记下来！

<!-- more -->

# 价值 思考 共鸣

## 简评：你认为这个问题是一个好的面试题吗？

- 在 JavaScript 中 (a ==1 && a== 2 && a==3) 可能为 true 吗？

> 这个问题是国外一位求职者最近在面试一家大型科技公司时遇到的一个问题。

> 他的回答是「不可能」，而面试方说「nothing is impossible」，然后就没有然后了。

> 虽然在实际工作中可能没人会写这样的代码，但题主还是放不下，苦思冥想了两个礼拜，终于还是决定在 Stack Overflow 上寻求解答。

> 大家可以先自己想一想...

...

...

...

...

...

...

...

...

...

...

...

...

...

...

...

...

...

...

...

...

...

...

...

...

...

...

...

...

...

...

...

...

...

...

...

...

...

...

这里给一个最高赞的答案：

自定义toString（或者valueOf）方法，每次调用改变一次返回值，从而满足判断条件。

```
const a = {
	i: 1,
	toString: function () {
		return a.i++;
		//或 return this.i++;
	}
}

if(a == 1 && a == 2 && a == 3) {
	console.log('Hello World!');
}
```

> 当使用 == 时，如果两个参数的类型不一样，那么 JS 会尝试将其中一个的类型转换为和另一个相同。在这里左边对象，右边数字的情况下，会首先尝试调用 valueOf（如果可以调用的话）来将对象转换为数字，如果失败，再调用 toString。

其实，还有很多其他的实现，感兴趣的可以去原问题里看看。

这个问题其实还是能考到对 Javascript 的基本理解的，而不是纯粹为了玩。

其一，对于一个对象做比较有 valueOf/toString 的调用问题。

其二，JS 里一个变量背后经常是一个 function。